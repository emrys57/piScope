<!DOCTYPE html>
<html>
  <head>
    <title>Real-Time Data</title>
    <!-- Include Chart.js or any other charting library -->
    <script type="text/javascript" src="./node_modules/smoothie/smoothie.js"></script>
  </head>
  <body style="background-color: lightgray">
    <canvas id="myChart" width="1000" height="300"></canvas>
    <script>
      let time0;
      const canvas = document.getElementById('myChart');
      const smoothie = new SmoothieChart({millisPerPixel: 200, minValue: 0, maxValue: 3000, grid: {fillStyle: 'transparent', millisPerLine: 10000}, tooltipLine: {strokeStyle: '#bbbbbb'}});
      const line1 = new TimeSeries();
      smoothie.addTimeSeries(line1, {strokeStyle: 'rgba(0, 255, 0, 1)', fillStyle: 'rgba(0, 255, 0, 0.6)', lineWidth: 4});

      smoothie.streamTo(canvas, 1000);

      const ws = new WebSocket('ws://localhost:8080');
      ws.onmessage = function (event) {
        const {time, reading} = JSON.parse(event.data);
        if (!time0) {
          time0 = time;
        }
        const time1 = time - time0;
        line1.append(time1, Number(reading));
        console.log(`time1: ${time1}, reading: ${reading}`);
      };
    </script>
  </body>
</html>
