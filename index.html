<!DOCTYPE html>
<html>
  <head>
    <title>Real-Time Data</title>
    <!-- Include Chart.js or any other charting library -->
    <script type="text/javascript" src="./node_modules/smoothie/smoothie.js"></script>
  </head>
  <body style="background-color: lightgray">
    <canvas id="myChart" width="1200" height="4500"></canvas>
    <script>
      let time0;
      const canvas = document.getElementById('myChart');
      const smoothie = new SmoothieChart({
        millisPerPixel: 400,
        minValue: 0,
        maxValue: 3500,
        grid: {fillStyle: '#f5f7e9', strokeStyle: 'rgba(150,150,150,0.3)', millisPerLine: 60000, verticalSections: 6, lineWidth: 1},
        tooltipLine: {strokeStyle: '#bbbbbb'},
        labels: {fillStyle: '#000000'},
      });
      const line1 = new TimeSeries();
      smoothie.addTimeSeries(line1, {strokeStyle: 'rgba(0, 0, 255, 1)', /*fillStyle: 'rgba(0, 255, 0, 0.6)',*/ lineWidth: 1});

      smoothie.streamTo(canvas, 1000);

      const ws = new WebSocket('ws://localhost:8080');
      ws.onmessage = function (event) {
        const {time, reading} = JSON.parse(event.data);
        if (!time0) {
          time0 = time;
        }
        const time1 = time - time0;
        line1.append(time, Number(reading));
        console.log(`time1: ${time1}, reading: ${reading}`);
      };
    </script>
  </body>
</html>
